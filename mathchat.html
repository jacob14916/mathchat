<head>
  <title>mathchat 0.1</title>
  <link rel="icon" 
      type="image/png" 
      href="/favicon.png">
</head>
<body>
</body>

<template name="layout">
  {{> header}}
  <div id="rest-of-page">
  {{> yield}}
  </div>
</template>

<template name="homepage">
  <div style="padding: 10px; display:block; font-size: 20px; width:100%">
    <img src="/logo512.png" width="512px" style="display:block;margin-left:auto;margin-right:auto">
    <br>
    Welcome to mathchat: math-enabled chat rooms, courtesy of
    <a href="http://meteor.com">Meteor</a> and <a href="http://mathjax.org">Mathjax</a>.
    <br>
    Find us on github <a href="http://github.com/jacob14916/mathchat">here</a>.
  </div>
</template>


<template name="chatroom">
  {{> chatarea}}
  <div class="sidepanel">
      <div id="roomname">
        {{roomname}}
      </div>
      <div id="currentusers">
        {{{currentusers}}}
      </div>
      <div id="reference">
        LaTeX quick reference goes here
      </div>
    </div>
</template>

<template name="header">
  
  <!-- Header includes navigation bar and title -->
  <div id="header">
    <a href="/"> <img id="titleimage" src="/logo512.png" /> </a>
    <div id="navigationbar">
      <a class="navbutton" href="/">Home</a>
      <a class="navbutton" href="/room/lobby"> Lobby </a>
      <a class="navbutton" href="/room/help"> Help </a>
      <span style="float:right;margin-right:10px">
	Go to room:
      <form class="roomnav" style="display:inline">
	    <input type="text" name="room">
	  </form>
      </span>
    </div>
    <div id="loginbutton">
        {{> loginButtons}}
    </div>
    
  </div>
</template>

<template name="chat">
  <p>{{user}} <span style="color:grey">{{time}}</span>:
    {{#mathjax}}{{#autolink}}<span>{{text}}</span>{{/autolink}}{{/mathjax}} <input {{pinid}}/> </p>
</template>

<!-- No hyphens in names. at all. -->

<template name="chatarea">
  <div class="chatarea">
    <div id="pin">
      {{#if pinnedmessages}}
        {{#each pinnedmessages}}
          <p><span style="color:silver">{{username}}</span>:
          {{#mathjax}}{{#autolink}}<span>{{text}}</span>{{/autolink}}{{/mathjax}}<input {{pinattributes}}/></p>
        {{/each}}
      {{else}}
        <span style="color:silver">Pin the problem statement/important messages here!</span>
      {{/if}}
    </div>
    <div id="splitbar"></div>
    <div id="messages">
      {{#each messages}}
        {{> chat}}
      {{/each}}
    </div>
    <div id="preview">
      {{#if currentmsg}}
        {{#mathjax}}<span>{{currentmsg}}</span>{{/mathjax}}
      {{else}}
        <span style="color: silver">Click the preview button to preview your message!</span>
      {{/if}}
    </div>
    {{> textentry}}
  </div>
  
</template>

<template name="textentry">
  <textarea class="chatinput" type="text" form="newchat" name="text"> </textarea>
  <input type="button" id="previewbutton" value="Preview"/>
  <input type="button" id="sendbutton" value="Send"/>
</template>

